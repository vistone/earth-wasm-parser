syntax = "proto2";

package earth.documentimport;

import "devtools/staticanalysis/pipeline/analyzers/proto_best_practices/proto/optouts.proto";
import "geo/earth/proto/contentcreation/data_import_errors.proto";
import "geo/earth/proto/error_response.proto";
import "storage/datapol/annotations/proto/semantic_annotations.proto";

option objc_class_prefix = "RTH";
option java_multiple_files = true;
option optimize_for = CODE_SIZE;
option java_package = "com.google.android.apps.earth.documentimport";

message DriveFileMetadata {
    optional string resource_id = 1;
    optional string resource_key = 2;
    optional string title = 3;
    optional string mime_type = 4;
    optional string url = 5;
    optional bool is_owned_by_user = 6;
    optional bool is_team_drive_item = 7;
}

message DriveImportDialogData {
    optional string user_id = 1;
    optional string user_email = 2;
    optional string dialog_title = 3;
}

message PendingImport {
    optional int32 id = 1;
    optional string name = 2;
    
    optional ImportStatus import_status = 3;
    enum ImportStatus {
        IMPORT_STATUS_NOT_STARTED = 0;
        IMPORT_STATUS_PENDING_DOCUMENT_CREATION = 1;
        IMPORT_STATUS_IN_PROGRESS = 2;
        IMPORT_STATUS_COMPLETED = 3;
        IMPORT_STATUS_CANCELLED = 4;
        IMPORT_STATUS_FAILED = 5;
    }
    
    optional FailureSource failure_source = 4;
    enum FailureSource {
        FAILURE_SOURCE_UNKNOWN = 0;
        FAILURE_SOURCE_INTERNAL = 1;
        FAILURE_SOURCE_BACKEND_COMMUNICATION = 2;
        FAILURE_SOURCE_REQUEST_TIMED_OUT = 3;
        FAILURE_SOURCE_IMPORT = 4;
        FAILURE_SOURCE_IMPORT_NO_FEATURES = 5;
    }
    
    optional string failure_message = 5;
    optional document.protos.ErrorResponse data_import_error_response = 6;
    optional ImportFailures import_failures = 7;
    optional float progress = 8;
}

message ImportFailures {
    optional document.protos.FeatureErrorList document_errors = 5;
    map<string, document.protos.FeatureErrorList> feature_errors = 6;
    optional int32 number_of_features_dropped_due_to_max_reached = 7;
    repeated document.protos.UnsupportedElement unsupported_elements = 8;
    map<string, int64> style_error_reference_map = 9;
    map<string, int64> schema_error_reference_map = 10;
}
