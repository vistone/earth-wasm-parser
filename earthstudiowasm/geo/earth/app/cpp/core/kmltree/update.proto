syntax = "editions";

package earth.kmltree;

import "devtools/staticanalysis/pipeline/analyzers/proto_best_practices/proto/optouts.proto";
import "geo/earth/app/cpp/core/document/capability.proto";
import "geo/earth/app/cpp/core/document/featureicon.proto";
import "geo/earth/app/cpp/core/document/featurekey.proto";
import "geo/earth/app/cpp/core/protos/legend.proto";
import "geo/earth/proto/contentcreation/content_editing_model.proto";

option objc_class_prefix = "RTH";
option java_multiple_files = true;
option optimize_for = CODE_SIZE;
option java_package = "com.google.android.apps.earth.kmltree";

message NodeUpdate {
    optional int32 index = 1;
    optional .earth.document.proto.FeatureKey key = 2;
    optional string title = 3;
    optional string snippet = 4;
    optional .earth.document.FeatureIcon standard_icon = 5;
    optional string icon_url = 6;
    
    optional Visibility visibility = 7;
    enum Visibility {
        VISIBILITY_UNKNOWN = 0;
        VISIBILITY_HIDDEN = 1;
        VISIBILITY_SUPPRESSED = 2;
        VISIBILITY_VISIBLE = 3;
    }
    
    optional bool opened = 8;
    optional int32 indentation = 9;
    repeated .earth.document.Capability capability = 10;
    
    optional LinkState link_state = 11;
    enum LinkState {
        LINK_STATE_UNKNOWN = 0;
        LINK_STATE_UNLOADED = 1;
        LINK_STATE_LOADING = 2;
        LINK_STATE_LOADED = 3;
        LINK_STATE_ERROR = 4;
    }
    
    optional bool is_overflow_proxy = 12;
    optional int32 overflow_count = 13;
    optional bool selected = 15;
    optional bool in_focus_scope = 16;
    optional bool pending_touch_selection = 17;
    optional .earth.document.protos.Color icon_color = 18;
    optional legend.Legend legend = 19;
}

message RowUpdate {
    optional Range range = 1;
    message Range {
        optional int32 first = 1;
        optional int32 last = 2;
    }
    
    optional Operation operation = 2;
    enum Operation {
        OPERATION_UNKNOWN = 0;
        OPERATION_INSERT = 1;
        OPERATION_DELETE = 2;
    }
}

message OverallSelection {
    optional ItemsSelected items_selected = 1;
    enum ItemsSelected {
        ALL_ITEMS_SELECTED = 0;
        SOME_ITEMS_SELECTED = 1;
        NO_ITEMS_SELECTED = 2;
    }
}

message Updates {
    repeated RowUpdate row_update = 1;
    repeated NodeUpdate node_update = 2;
    optional bool client_originated = 3;
    optional int32 index_of_feature_to_reveal = 4;
}
