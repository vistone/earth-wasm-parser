syntax = "editions";

package earth.deeplink;

import "geo/earth/proto/documentnamespace.proto";
import "geo/earth/proto/mapstyle.proto";
import "geo/earth/proto/storage_restrictions.proto";
import "storage/datapol/annotations/proto/semantic_annotations.proto";

option objc_class_prefix = "RTHDL";
option java_multiple_files = true;
option optimize_for = CODE_SIZE;
option java_package = "com.google.geo.earth.app.common.deeplink";

message CameraState {
    optional double latitude = 1;
    optional double longitude = 2;
    optional double altitude = 3;
    optional double range = 4;
    optional double fovy = 5;
    optional double heading = 6;
    optional double tilt = 7;
    optional double roll = 8;
}

message LegacyDataState {
    optional FeatureData feature_data = 1;
    optional bool fullscreen = 2;
    
    optional PanoId pano_id = 4;
    message PanoId {
        optional string pano_id = 1;
        optional PanoFrontEnd front_end = 2;
    }
    
    optional CameraPresentationMode camera_presentation_mode = 5;
    enum CameraPresentationMode {
        PLANET_ORBIT = 1;
        POI_ORBIT = 2;
        CINEMATIC = 3;
        STATIC = 4;
    }
    
    optional DriveData drive_data = 6;
    optional SessionData session_data = 7;
    optional HomescreenData homescreen_data = 8;
    optional DocumentData document_data = 9;
    optional DesignData design_data = 10;
    
    reserved 3;
    
    enum PanoFrontEnd {
        UNKNOWN = 1;
        ALLEYCAT = 2;
        FIFE = 3;
        FIFE_MEDIA_KEY = 5;
        LOCAL = 4;
    }
}

message FeatureData {
    optional EarthFeedData earth_feed_data = 2;
    optional KnowledgeCardData knowledge_card_data = 3;
    optional SearchData search_data = 4;
    optional TimeMachineData time_machine_data = 5;
    optional TimelapseData timelapse_data = 7;
    optional BasemapStyleData basemap_style_data = 8;
    
    reserved 1, 6;
}

message EarthFeedData {
    optional bool grid_open = 1 [default = false];
    optional string guid = 2;
    optional string balloon_feature_id = 4;
    
    reserved 3;
}

message KnowledgeCardData {
    optional CardSize card_size = 3 [default = NORMAL];
    enum CardSize {
        COLLAPSED = 1;
        NORMAL = 2;
        EXPANDED = 3;
    }
    
    optional bool card_set_requested = 4;
    
    oneof place_id {
        string mid = 1;
        OysterId oyster_id = 2;
    }
    
    message OysterId {
        optional string feature_id = 1;
        optional string layer_id = 2;
        optional double latitude = 3;
        optional double longitude = 4;
        optional string query = 5;
    }
}

message SearchData {
    optional LatLonBox viewport = 1;
}

message TimeMachineData {
    optional bool enabled = 1 [default = false];
    optional string current_date = 2;
    optional bool expanded = 3 [default = false];
    
    reserved 4, 5, 6;
}

message TimelapseData {
    optional bool enabled = 1 [default = false];
    optional double framerate_multiplier = 2 [default = 1];
    optional int32 paused_at_year = 3;
    optional bool expanded = 4 [default = false];
}

message BasemapStyleData {
    optional layers.MapStyle.Imagery imagery = 1;
}

message LatLonBox {
    optional double north = 1;
    optional double south = 2;
    optional double east = 3;
    optional double west = 4;
}

message DriveData {
    optional DriveAction action = 1;
}

message DriveAction {
    oneof DriveActionType {
        DriveOpenAction open_document = 1;
        DriveCreateAction create_document = 2;
    }
}

message DriveCreateAction {
    optional string folder_id = 1;
}

message DriveOpenAction {
    optional string document_id = 1;
    optional DriveOpenActionPlayModeDetail play_mode = 2;
    optional string resource_key = 3;
    optional document.DocumentNamespace document_namespace = 4 [default = DOCUMENT_NAMESPACE_EARTH];
}

message DriveOpenActionPlayModeDetail {
    optional string feature_id = 1;
}

message SessionData {
    optional string session_identifier = 1;
}

message HomescreenData {
    optional bool is_homescreen_open = 1;
}

message DesignData {
    optional string selected_design_id = 1;
    optional bool is_design_details_open = 2;
}

message DocumentData {
    optional int32 focused_document_key = 1;
    optional bool is_document_persisted = 2;
    optional bool fly_to_after_load = 3;
}
