syntax = "editions";

package earth.document.protos;

import "geo/earth/proto/contentcreation/content_editing_model.proto";
import "geo/earth/proto/storage_restrictions.proto";

option java_multiple_files = true;
option optimize_for = CODE_SIZE;
option java_package = "com.google.geo.earth.core.document";

message EditingModelExtension {
    oneof NodeType {
        DocumentExtension document_extension = 1;
        StyleSelectorExtension style_selector_extension = 2;
        FeatureExtension feature_extension = 3;
        GxImageExtension gx_image_extension = 4;
        GroundOverlayExtension ground_overlay_extension = 5;
        ModelExtension model_extension = 6;
    }
}

message DocumentExtension {
    optional EditingModelMaterializationVersion materialization_version = 2;
    optional ContentStyle content_style = 1;
}

message EditingModelMaterializationVersion {
    optional int32 major_version = 1 [default = 0];
    optional int32 minor_version = 2 [default = 0];
}

message StyleSelectorExtension {
    optional StyleMapExtension style_map_extension = 1;
    optional StyleExtension style_extension = 2;
    optional bool is_managed_style = 3;
    optional GxCascadingStyleExtension gx_cascading_style_extension = 4;
}

message GxCascadingStyleExtension {
    repeated MaterializedStyleLayer materialized_style_layer = 1;
}

message MaterializedStyleLayer {
    optional string url = 1;
    
    oneof MateralizedStyleLayerType {
        BalloonTemplate balloon_template = 2;
    }
}

message StyleMapExtension {
    
}

message StyleExtension {
    
}

message FeatureExtension {
    optional bool has_managed_style = 3;
    optional bool stored_visibility = 5;
    optional ContainerExtension container_extension = 6;
    optional FeatureEditRestrictionsExtension feature_edit_restrictions_extension = 7;
    optional FeatureOriginExtension feature_origin = 8 [default = FEATUREORIGINEXTENSION_USER];
    
    reserved 1, 2, 4;
}

message ContainerExtension {
    optional bool stored_opened = 1;
}

message FeatureEditRestrictionsExtension {
    optional bool can_edit_feature_properties = 7 [default = true];
    optional bool can_edit_feature_style = 1 [default = true];
}

message GxImageExtension {
    optional Media media = 1;
}

message GroundOverlayExtension {
    optional Media image_media = 1;
    optional MapTilePyramidExtension map_tile_pyramid_extension = 2;
}

message MapTilePyramidExtension {
    optional EarthDataLayer earth_data_layer = 1;
}

message ModelExtension {
    optional ThreeDAsset asset = 1;
}

enum FeatureOriginExtension {
    FEATUREORIGINEXTENSION_UNKNOWN = 0;
    FEATUREORIGINEXTENSION_USER = 1;
    FEATUREORIGINEXTENSION_GEMINI = 2;
}
