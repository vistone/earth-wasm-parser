syntax = "proto2";

package google.internal.earth.v1;

import "google/protobuf/timestamp.proto";
import "net/proto2/contrib/validator/annotations.proto";
import "storage/datapol/annotations/proto/semantic_annotations.proto";
import "wireless/android/privacy/annotations/proto/collection_basis_annotations.proto";

option objc_class_prefix = "RTH";
option java_multiple_files = true;
option java_package = "com.google.internal.earth.v1";

message ClientMetadata {
    optional string country_code = 4;
    optional string client_version = 2;
    
    optional ClientType client_type = 3;
    enum ClientType {
        UNKNOWN = 0;
        ANDROID = 1;
        IOS = 2;
        WEB = 3;
        PROBER = 4;
        STUDIO = 5;
        MIRTH_DEMO = 6;
        MAPS_JS_API = 7;
    }
    
    reserved 1;
}

message Viewport {
    optional double north = 1;
    optional double south = 2;
    optional double east = 3;
    optional double west = 4;
}

message LookFromCamera {
    optional double latitude = 1;
    optional double longitude = 2;
    optional double altitude = 3;
    optional double heading = 4;
    optional double tilt = 5;
    optional double roll = 6;
    optional double field_of_view_y = 7;
}

message ImageSize {
    optional int32 width = 1;
    optional int32 height = 2;
}

message LatitudeLongitude {
    optional double latitude = 1;
    optional double longitude = 2;
}

message VideoRasterLayer {
    optional string id = 1 [deprecated = true];
    optional string tile_path = 2;
    optional string start_date = 3;
    optional string end_date = 4;
    optional int32 num_frames = 5;
    optional float animation_rate = 6;
    optional float dwell_start = 7;
    optional float dwell_end = 8;
    optional int32 max_level = 9;
    optional int32 clamped_altitude = 10;
    optional string iso_date_format = 11;
    optional string display_name = 12;
}

message DataLayerPublishingInfo {
    repeated Source sources = 1;
    message Source {
        optional string name = 1;
        optional string url = 2;
    }
}

message DataLayerGraphicAssets {
    optional GraphicAsset thumbnail = 1;
    message GraphicAsset {
        optional string url = 1;
    }
}

message DataLayer {
    optional string id = 1;
    optional string display_name = 2;
    optional string description = 9;
    optional string subtitle = 11;
    optional protobuf.Timestamp last_update = 4;
    optional DataLayerGraphicAssets graphic_assets = 13;
    map<string, Legend> legend_by_key = 10;
    optional DataLayerPublishingInfo publishing_info = 12;
    
    oneof layer_type {
        DmsLayer dms_layer = 5;
        KmlLayer kml_layer = 6;
        UrlTemplateLayer url_template_layer = 7;
        VideoRasterLayer video_raster_layer = 8;
    }
    
    reserved 3;
}

message InteractiveBalloonData {
    optional string style_url = 1;
}

message Legend {
    optional string localized_name = 1;
    repeated StyleAttribute attributes = 2;
}

message StyleAttribute {
    optional string fill_color_rgb = 3;
    optional string stroke_color_rgb = 4;
    optional double stroke_width_px = 5;
    optional double opacity = 6;
    
    optional Icon icon = 7;
    message Icon {
        oneof icon_type {
            uint32 paint_id = 1;
            bytes custom_icon_bytes = 2;
            string custom_icon_path = 3;
        }
    }
    
    oneof StyleAttributeValue {
        CategoricalValue categorical_value = 1;
        InterpolatedValue interpolated_value = 2;
    }
    
    message CategoricalValue {
        optional string localized_string_value = 5;
        
        oneof value {
            string string_value = 1;
            int64 int_value = 3;
            double double_value = 4;
        }
        
        reserved 2;
    }
    
    message InterpolatedValue {
        oneof value {
            int64 int_value = 1;
            double double_value = 2;
        }
    }
}

message DmsLayer {
    optional string tile_key = 1;
    optional protobuf.Timestamp publish_timestamp = 3;
    optional DmsLayerMetadata dms_layer_metadata = 7;
    optional string fallback_title = 9;
    optional string fallback_description = 10;
    
    oneof dms_layer_type {
        InteractiveBalloonData interactive_balloon = 4;
    }
    
    reserved 2, 8;
}

message DmsLayerIdentifier {
    oneof dms_layer_identifier {
        string opaque_identifier = 1;
        string dms_handle = 2;
    }
}

message DmsLayerMetadata {
    repeated KeyValuePair key_value_pairs = 1;
    message KeyValuePair {
        optional string key = 1;
        
        oneof value {
            bool bool_value = 2;
            int64 int_value = 3;
            double double_value = 4;
            string string_value = 5;
            bytes bytes_value = 6;
        }
    }
    
    map<string, string> processed_key_value_pairs = 2;
    
    optional AttributeConfig attribute_config = 3;
    message AttributeConfig {
        optional string primary_attribute = 1;
        repeated string secondary_attributes = 2;
        optional string feature_name_attribute = 3;
        map<string, AttributeFormatConfig> attribute_format_config = 4;
        
        message AttributeFormatConfig {
            optional string currency_code = 3;
            optional int32 significant_digits = 4;
            
            reserved 1, 2;
        }
    }
}

message FilterSet {
    oneof filter_set {
        CategoricalFilterSet categorical_filter_set = 1;
        InterpolatedFilterSet interpolated_filter_set = 2;
    }
}

message CategoricalFilterSet {
    repeated CategoricalFilterOption options = 1;
    message CategoricalFilterOption {
        oneof value {
            string string_value = 1;
            int64 int_value = 2;
            double double_value = 3;
        }
    }
}

message InterpolatedFilterSet {
    repeated InterpolatedFilterRange ranges = 1;
    message InterpolatedFilterRange {
        oneof range {
            DoubleRange double_range = 1;
            IntRange int_range = 2;
        }
    }
}

message DoubleRange {
    optional double min = 1;
    optional double max = 2;
}

message IntRange {
    optional int64 min = 1;
    optional int64 max = 2;
}

message KmlLayer {
    optional string kml_url = 1;
}

message UrlTemplateLayer {
    optional string url_template = 1;
}

message DataProvider {
    optional string id = 1;
    optional string display_name = 2;
}
